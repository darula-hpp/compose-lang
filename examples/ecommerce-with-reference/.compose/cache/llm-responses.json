{
  "798aa836385ec608758320ae3df677196fbcab1c96fac853bef56a9183089cc0": "### FILE: generated/web/package.json\n{\n  \"name\": \"web\",\n  \"version\": \"0.1.0\",\n  \"private\": true,\n  \"scripts\": {\n    \"dev\": \"next dev\",\n    \"build\": \"next build\",\n    \"start\": \"next start\",\n    \"lint\": \"next lint\"\n  },\n  \"dependencies\": {\n    \"date-fns\": \"^3.6.0\",\n    \"next\": \"14.2.3\",\n    \"next-themes\": \"^0.3.0\",\n    \"react\": \"^18.3.1\",\n    \"react-dom\": \"^18.3.1\"\n  },\n  \"devDependencies\": {\n    \"@types/node\": \"^20.12.12\",\n    \"@types/react\": \"^18.3.2\",\n    \"@types/react-dom\": \"^18.3.0\",\n    \"autoprefixer\": \"^10.4.19\",\n    \"eslint\": \"^8.57.0\",\n    \"eslint-config-next\": \"14.2.3\",\n    \"postcss\": \"^8.4.38\",\n    \"tailwindcss\": \"^3.4.3\",\n    \"typescript\": \"^5.4.5\"\n  }\n}\n\n### FILE: generated/web/tsconfig.json\n{\n  \"compilerOptions\": {\n    \"lib\": [\"dom\", \"dom.iterable\", \"esnext\"],\n    \"allowJs\": true,\n    \"skipLibCheck\": true,\n    \"strict\": true,\n    \"noEmit\": true,\n    \"esModuleInterop\": true,\n    \"module\": \"esnext\",\n    \"moduleResolution\": \"bundler\",\n    \"resolveJsonModule\": true,\n    \"isolatedModules\": true,\n    \"jsx\": \"preserve\",\n    \"incremental\": true,\n    \"plugins\": [\n      {\n        \"name\": \"next\"\n      }\n    ],\n    \"paths\": {\n      \"@/*\": [\"./*\"]\n    }\n  },\n  \"include\": [\"next-env.d.ts\", \"**/*.ts\", \"**/*.tsx\", \".next/types/**/*.ts\"],\n  \"exclude\": [\"node_modules\"]\n}\n\n### FILE: generated/web/next.config.js\n/** @type {import('next').NextConfig} */\nconst nextConfig = {\n  reactStrictMode: true,\n};\n\nmodule.exports = nextConfig;\n\n### FILE: generated/web/tailwind.config.ts\nimport type { Config } from 'tailwindcss';\n\nconst config: Config = {\n  darkMode: 'class', // Enable dark mode based on 'class'\n  content: [\n    './pages/**/*.{js,ts,jsx,tsx,mdx}',\n    './components/**/*.{js,ts,jsx,tsx,mdx}',\n    './app/**/*.{js,ts,jsx,tsx,mdx}',\n  ],\n  theme: {\n    extend: {\n      backgroundImage: {\n        'gradient-radial': 'radial-gradient(var(--tw-gradient-stops))',\n        'gradient-conic':\n          'conic-gradient(from 180deg at 50% 50%, var(--tw-gradient-stops))',\n      },\n    },\n  },\n  plugins: [],\n};\nexport default config;\n\n### FILE: generated/web/postcss.config.js\nmodule.exports = {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n};\n\n### FILE: generated/web/app/globals.css\n@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n@layer base {\n  body {\n    @apply bg-gray-50 text-gray-900 dark:bg-gray-900 dark:text-gray-50 transition-colors duration-300;\n  }\n}\n\n### FILE: generated/web/lib/types.ts\nexport interface Item {\n  id: number;\n  name: string;\n  price: number;\n  quantity: number; // Quantity in stock or for a specific context (e.g., cart item quantity)\n}\n\nexport interface User {\n  id: number;\n  email: string;\n  loyaltyTier: \"bronze\" | \"silver\" | \"gold\";\n  state: string; // For tax calculation\n}\n\nexport interface Order {\n  id: number;\n  items: Item[]; // Items in the order, each with its specific quantity\n  user: User;\n  subtotal: number; // Sum of (item.price * item.quantity) before discount\n  discount: number; // Total discount applied\n  tax: number; // Total tax applied\n  total: number; // Final total (subtotal - discount + tax)\n}\n\nexport interface CartItem extends Item {\n  // Extends Item, so it already has id, name, price, quantity\n  // No additional fields needed for CartItem beyond what Item already provides\n}\n\n### FILE: generated/web/lib/pricing.ts\nimport { Item, User } from './types';\n\n/**\n * @reference/pricing.py - Tax Rates\n * Example tax rates based on state.\n */\nconst TAX_RATES: Record<string, number> = {\n  \"CA\": 0.075, // California\n  \"NY\": 0.08875, // New York\n  \"TX\": 0.0625, // Texas\n  \"FL\": 0.06, // Florida\n  \"IL\": 0.0625, // Illinois\n  \"DEFAULT\": 0.05, // Default tax rate for unknown states\n};\n\n/**\n * @reference/pricing.py::apply_discount\n * Applies loyalty tier discounts to a subtotal.\n * - Discounts are applied before tax calculation.\n * - Rounds to 2 decimal places.\n * - Minimum order $10 after discounts.\n *\n * @param subtotal The subtotal before any discounts.\n * @param loyaltyTier The user's loyalty tier.\n * @returns The calculated discount amount.\n */\nexport function applyDiscount(subtotal: number, loyaltyTier: User['loyaltyTier']): number {\n  let discountPercentage = 0;\n  switch (loyaltyTier) {\n    case \"silver\":\n      discountPercentage = 0.05; // 5% discount\n      break;\n    case \"gold\":\n      discountPercentage = 0.10; // 10% discount\n      break;\n    case \"bronze\":\n    default:\n      discountPercentage = 0; // No discount for bronze\n      break;\n  }\n\n  let discountAmount = subtotal * discountPercentage;\n  let discountedSubtotal = subtotal - discountAmount;\n\n  // Preserve business rule: Minimum order $10 after discounts\n  // If the discounted subtotal falls below $10, and the original subtotal was at least $10,\n  // adjust the discount so the final subtotal is exactly $10.\n  if (subtotal >= 10 && discountedSubtotal < 10) {\n    discountAmount = subtotal - 10; // Adjust discount to make final subtotal $10\n  } else if (discountedSubtotal < 0) {\n    // This case should ideally not happen with positive subtotals and discounts < 100%\n    // but as a safeguard, ensure discountedSubtotal doesn't go negative.\n    discountAmount = subtotal; // Max discount is subtotal itself\n  }\n\n  // Round to 2 decimal places\n  return parseFloat(discountAmount.toFixed(2));\n}\n\n/**\n * @reference/pricing.py::calculate_total\n * Calculates the complete order totals including subtotal, discount, tax, and final total.\n *\n * @param items A list of items in the cart, each with its quantity.\n * @param user The user making the purchase, for loyalty tier and state-based tax.\n * @returns An object containing subtotal, discount, tax, and total.\n */\nexport function calculateOrderTotals(\n  items: Item[],\n  user: User\n): { subtotal: number; discount: number; tax: number; total: number } {\n  // Calculate initial subtotal (sum of price * quantity for all items)\n  const initialSubtotal = items.reduce((sum, item) => sum + item.price * item.quantity, 0);\n\n  // Apply discounts before tax calculation\n  const discount = applyDiscount(initialSubtotal, user.loyaltyTier);\n  const subtotalAfterDiscount = initialSubtotal - discount;\n\n  // Calculate tax on (subtotal - discount)\n  const taxRate = TAX_RATES[user.state] || TAX_RATES[\"DEFAULT\"];\n  const tax = parseFloat((subtotalAfterDiscount * taxRate).toFixed(2)); // Store tax separately, rounded\n\n  // Calculate final total\n  const total = parseFloat((subtotalAfterDiscount + tax).toFixed(2));\n\n  return {\n    subtotal: parseFloat(initialSubtotal.toFixed(2)), // Ensure subtotal is also rounded\n    discount,\n    tax,\n    total,\n  };\n}\n\n### FILE: generated/web/lib/data.ts\nimport { Item, User } from './types';\n\nexport const sampleProducts: Item[] = [\n  { id: 1, name: 'Wireless Mouse', price: 25.99, quantity: 1 },\n  { id: 2, name: 'Mechanical Keyboard', price: 79.99, quantity: 1 },\n  { id: 3, name: 'USB-C Hub', price: 39.99, quantity: 1 },\n  { id: 4, name: 'Monitor Stand', price: 49.99, quantity: 1 },\n  { id: 5, name: 'Webcam 1080p', price: 59.99, quantity: 1 },\n  { id: 6, name: 'Noise-Cancelling Headphones', price: 129.99, quantity: 1 },\n  { id: 7, name: 'External SSD 1TB', price: 99.99, quantity: 1 },\n  { id: 8, name: 'Ergonomic Chair', price: 299.99, quantity: 1 },\n];\n\nexport const defaultUser: User = {\n  id: 1,\n  email: 'john.doe@example.com',\n  loyaltyTier: 'gold', // Can be 'bronze', 'silver', 'gold' for testing discounts\n  state: 'CA', // Can be 'NY', 'TX', 'FL', 'IL', 'DEFAULT' for testing tax\n};\n\n### FILE: generated/web/components/providers/ThemeProvider.tsx\n'use client';\n\nimport { ThemeProvider as NextThemesProvider } from 'next-themes';\nimport { type ThemeProviderProps } from 'next-themes/dist/types';\nimport * as React from 'react';\n\nexport function ThemeProvider({ children, ...props }: ThemeProviderProps) {\n  return <NextThemesProvider {...props}>{children}</NextThemesProvider>;\n}\n\n### FILE: generated/web/components/providers/CartProvider.tsx\n'use client';\n\nimport React, { createContext, useContext, useState, useEffect, ReactNode } from 'react';\nimport { Item, CartItem } from '@/lib/types';\n\ninterface CartContextType {\n  cartItems: CartItem[];\n  addItem: (item: Item) => void;\n  updateQuantity: (itemId: number, quantity: number) => void;\n  removeItem: (itemId: number) => void;\n  clearCart: () => void;\n  getCartTotalItems: () => number;\n  getCartSubtotal: () => number;\n}\n\nconst CartContext = createContext<CartContextType | undefined>(undefined);\n\nexport const CartProvider = ({ children }: { children: ReactNode }) => {\n  const [cartItems, setCartItems] = useState<CartItem[]>([]);\n\n  // Load cart from localStorage on initial mount\n  useEffect(() => {\n    const storedCart = localStorage.getItem('cart');\n    if (storedCart) {\n      setCartItems(JSON.parse(storedCart));\n    }\n  }, []);\n\n  // Save cart to localStorage whenever it changes\n  useEffect(() => {\n    localStorage.setItem('cart', JSON.stringify(cartItems));\n  }, [cartItems]);\n\n  const addItem = (item: Item) => {\n    setCartItems((prevItems) => {\n      const existingItem = prevItems.find((cartItem) => cartItem.id === item.id);\n      if (existingItem) {\n        return prevItems.map((cartItem) =>\n          cartItem.id === item.id\n            ? { ...cartItem, quantity: cartItem.quantity + 1 }\n            : cartItem\n        );\n      } else {\n        return [...prevItems, { ...item, quantity: 1 }];\n      }\n    });\n  };\n\n  const updateQuantity = (itemId: number, quantity: number) => {\n    setCartItems((prevItems) => {\n      if (quantity <= 0) {\n        return prevItems.filter((item) => item.id !== itemId);\n      }\n      return prevItems.map((item) =>\n        item.id === itemId ? { ...item, quantity: quantity } : item\n      );\n    });\n  };\n\n  const removeItem = (itemId: number) => {\n    setCartItems((prevItems) => prevItems.filter((item) => item.id !== itemId));\n  };\n\n  const clearCart = () => {\n    setCartItems([]);\n  };\n\n  const getCartTotalItems = () => {\n    return cartItems.reduce((total, item) => total + item.quantity, 0);\n  };\n\n  const getCartSubtotal = () => {\n    return cartItems.reduce((total, item) => total + item.price * item.quantity, 0);\n  };\n\n  return (\n    <CartContext.Provider\n      value={{\n        cartItems,\n        addItem,\n        updateQuantity,\n        removeItem,\n        clearCart,\n        getCartTotalItems,\n        getCartSubtotal,\n      }}\n    >\n      {children}\n    </CartContext.Provider>\n  );\n};\n\nexport const useCart = () => {\n  const context = useContext(CartContext);\n  if (context === undefined) {\n    throw new Error('useCart must be used within a CartProvider');\n  }\n  return context;\n};\n\n### FILE: generated/web/components/ThemeSwitcher.tsx\n'use client';\n\nimport { useTheme } from 'next-themes';\nimport { useEffect, useState } from 'react';\n\nexport function ThemeSwitcher() {\n  const [mounted, setMounted] = useState(false);\n  const { theme, setTheme } = useTheme();\n\n  useEffect(() => {\n    setMounted(true);\n  }, []);\n\n  if (!mounted) {\n    return null;\n  }\n\n  return (\n    <button\n      className=\"p-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200\"\n      onClick={() => setTheme(theme === 'dark' ? 'light' : 'dark')}\n      aria-label=\"Toggle dark mode\"\n    >\n      {theme === 'dark' ? '‚òÄÔ∏è Light Mode' : 'üåô Dark Mode'}\n    </button>\n  );\n}\n\n### FILE: generated/web/components/Header.tsx\n'use client';\n\nimport Link from 'next/link';\nimport { useCart } from './providers/CartProvider';\nimport { ThemeSwitcher } from './ThemeSwitcher';\n\nexport function Header() {\n  const { getCartTotalItems } = useCart();\n  const totalItems = getCartTotalItems();\n\n  return (\n    <header className=\"bg-white dark:bg-gray-800 shadow-md p-4 flex justify-between items-center sticky top-0 z-50\">\n      <Link href=\"/\" className=\"text-2xl font-bold text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors duration-200\">\n        MyShop\n      </Link>\n      <nav className=\"flex items-center space-x-4\">\n        <Link href=\"/cart\" className=\"relative text-lg text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200\">\n          üõí Cart\n          {totalItems > 0 && (\n            <span className=\"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center\">\n              {totalItems}\n            </span>\n          )}\n        </Link>\n        <ThemeSwitcher />\n      </nav>\n    </header>\n  );\n}\n\n### FILE: generated/web/components/Footer.tsx\nexport function Footer() {\n  return (\n    <footer className=\"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 p-4 text-center mt-8\">\n      <p>&copy; {new Date().getFullYear()} MyShop. All rights reserved.</p>\n    </footer>\n  );\n}\n\n### FILE: generated/web/components/ItemCard.tsx\n'use client';\n\nimport React from 'react';\nimport { Item } from '@/lib/types';\nimport { useCart } from './providers/CartProvider';\n\ninterface ItemCardProps {\n  item: Item;\n}\n\nexport function ItemCard({ item }: ItemCardProps) {\n  const { addItem } = useCart();\n\n  return (\n    <div className=\"bg-white dark:bg-gray-800 shadow-lg rounded-lg p-6 flex flex-col justify-between transform transition-transform duration-200 hover:scale-105 hover:shadow-xl\">\n      <div>\n        <h3 className=\"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-2\">{item.name}</h3>\n        <p className=\"text-gray-700 dark:text-gray-300 text-lg mb-4\">${item.price.toFixed(2)}</p>\n      </div>\n      <button\n        onClick={() => addItem(item)}\n        className=\"mt-4 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50\"\n      >\n        Add to Cart\n      </button>\n    </div>\n  );\n}\n\n### FILE: generated/web/components/CartItemCard.tsx\n'use client';\n\nimport React from 'react';\nimport { CartItem } from '@/lib/types';\nimport { useCart } from './providers/CartProvider';\n\ninterface CartItemCardProps {\n  item: CartItem;\n}\n\nexport function CartItemCard({ item }: CartItemCardProps) {\n  const { updateQuantity, removeItem } = useCart();\n\n  const handleQuantityChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const newQuantity = parseInt(e.target.value, 10);\n    if (!isNaN(newQuantity)) {\n      updateQuantity(item.id, newQuantity);\n    }\n  };\n\n  return (\n    <div className=\"flex items-center justify-between bg-white dark:bg-gray-800 shadow-md rounded-lg p-4 mb-4\">\n      <div className=\"flex-1\">\n        <h3 className=\"text-lg font-semibold text-gray-900 dark:text-gray-100\">{item.name}</h3>\n        <p className=\"text-gray-700 dark:text-gray-300\">${item.price.toFixed(2)}</p>\n      </div>\n      <div className=\"flex items-center space-x-4\">\n        <input\n          type=\"number\"\n          min=\"1\"\n          value={item.quantity}\n          onChange={handleQuantityChange}\n          className=\"w-16 p-2 border border-gray-300 dark:border-gray-600 rounded-md text-center bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n          aria-label={`Quantity for ${item.name}`}\n        />\n        <p className=\"text-lg font-medium text-gray-900 dark:text-gray-100\">\n          ${(item.price * item.quantity).toFixed(2)}\n        </p>\n        <button\n          onClick={() => removeItem(item.id)}\n          className=\"text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 transition-colors duration-200 p-2 rounded-full hover:bg-red-100 dark:hover:bg-red-900\"\n          aria-label={`Remove ${item.name} from cart`}\n        >\n          ‚úï\n        </button>\n      </div>\n    </div>\n  );\n}\n\n### FILE: generated/web/components/CartSummary.tsx\n'use client';\n\nimport React from 'react';\nimport Link from 'next/link';\nimport { useCart } from './providers/CartProvider';\n\nexport function CartSummary() {\n  const { cartItems, getCartSubtotal } = useCart();\n  const subtotal = getCartSubtotal();\n\n  if (cartItems.length === 0) {\n    return (\n      <div className=\"bg-white dark:bg-gray-800 shadow-md rounded-lg p-6 text-center\">\n        <p className=\"text-gray-700 dark:text-gray-300 text-lg\">Your cart is empty.</p>\n        <Link href=\"/\" className=\"mt-4 inline-block bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors duration-200\">\n          Start Shopping\n        </Link>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"bg-white dark:bg-gray-800 shadow-md rounded-lg p-6\">\n      <h2 className=\"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-4\">Cart Summary</h2>\n      <div className=\"flex justify-between items-center mb-4 border-b border-gray-200 dark:border-gray-700 pb-2\">\n        <p className=\"text-lg text-gray-700 dark:text-gray-300\">Subtotal:</p>\n        <p className=\"text-xl font-semibold text-gray-900 dark:text-gray-100\">${subtotal.toFixed(2)}</p>\n      </div>\n      <Link href=\"/checkout\" className=\"block w-full text-center bg-green-600 text-white py-3 px-4 rounded-md text-lg font-semibold hover:bg-green-700 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-50\">\n        Proceed to Checkout\n      </Link>\n    </div>\n  );\n}\n\n### FILE: generated/web/components/CheckoutSummary.tsx\n'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { useCart } from './providers/CartProvider';\nimport { calculateOrderTotals } from '@/lib/pricing';\nimport { defaultUser } from '@/lib/data';\nimport { User } from '@/lib/types';\nimport { useRouter } from 'next/navigation';\n\nexport function CheckoutSummary() {\n  const { cartItems, clearCart, getCartSubtotal } = useCart();\n  const router = useRouter();\n  const [user, setUser] = useState<User>(defaultUser); // Use default user for calculation\n  const [orderTotals, setOrderTotals] = useState({\n    subtotal: 0,\n    discount: 0,\n    tax: 0,\n    total: 0,\n  });\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [paymentError, setPaymentError] = useState<string | null>(null);\n\n  useEffect(() => {\n    if (cartItems.length > 0) {\n      const totals = calculateOrderTotals(cartItems, user);\n      setOrderTotals(totals);\n    } else {\n      setOrderTotals({ subtotal: 0, discount: 0, tax: 0, total: 0 });\n    }\n  }, [cartItems, user]);\n\n  const handleProcessPayment = async () => {\n    if (cartItems.length === 0) {\n      setPaymentError(\"Your cart is empty. Please add items before checking out.\");\n      return;\n    }\n\n    setIsProcessing(true);\n    setPaymentError(null);\n\n    // Simulate payment processing and email sending\n    try {\n      // In a real application, this would involve API calls to a payment gateway\n      // and a backend service to create the order and send emails.\n      await new Promise((resolve) => setTimeout(resolve, 2000)); // Simulate network delay\n\n      // If payment is successful:\n      clearCart(); // Clear the cart after successful order\n      router.push('/order-confirmation');\n    } catch (error) {\n      console.error(\"Payment processing failed:\", error);\n      setPaymentError(\"Payment failed. Please try again.\");\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  return (\n    <div className=\"bg-white dark:bg-gray-800 shadow-lg rounded-lg p-6\">\n      <h2 className=\"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-4\">Order Summary</h2>\n\n      <div className=\"space-y-2 mb-6\">\n        <div className=\"flex justify-between\">\n          <p className=\"text-gray-700 dark:text-gray-300\">Items Subtotal:</p>\n          <p className=\"font-medium text-gray-900 dark:text-gray-100\">${orderTotals.subtotal.toFixed(2)}</p>\n        </div>\n        <div className=\"flex justify-between\">\n          <p className=\"text-gray-700 dark:text-gray-300\">Discount ({user.loyaltyTier}):</p>\n          <p className=\"font-medium text-red-600 dark:text-red-400\">-${orderTotals.discount.toFixed(2)}</p>\n        </div>\n        <div className=\"flex justify-between\">\n          <p className=\"text-gray-700 dark:text-gray-300\">Tax ({user.state}):</p>\n          <p className=\"font-medium text-gray-900 dark:text-gray-100\">${orderTotals.tax.toFixed(2)}</p>\n        </div>\n        <div className=\"flex justify-between pt-4 border-t border-gray-200 dark:border-gray-700\">\n          <p className=\"text-xl font-bold text-gray-900 dark:text-gray-100\">Order Total:</p>\n          <p className=\"text-xl font-bold text-blue-600 dark:text-blue-400\">${orderTotals.total.toFixed(2)}</p>\n        </div>\n      </div>\n\n      {paymentError && (\n        <p className=\"text-red-500 text-center mb-4\">{paymentError}</p>\n      )}\n\n      <button\n        onClick={handleProcessPayment}\n        disabled={isProcessing || cartItems.length === 0}\n        className=\"w-full bg-blue-600 text-white py-3 px-4 rounded-md text-lg font-semibold hover:bg-blue-700 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 disabled:opacity-50 disabled:cursor-not-allowed\"\n      >\n        {isProcessing ? 'Processing Payment...' : 'Process Payment'}\n      </button>\n\n      {/* Optional: Allow changing user details for testing different discounts/taxes */}\n      <div className=\"mt-6 p-4 bg-gray-100 dark:bg-gray-700 rounded-md\">\n        <h3 className=\"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2\">Customer Details (for testing)</h3>\n        <div className=\"grid grid-cols-2 gap-4\">\n          <div>\n            <label htmlFor=\"loyaltyTier\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">Loyalty Tier</label>\n            <select\n              id=\"loyaltyTier\"\n              value={user.loyaltyTier}\n              onChange={(e) => setUser({ ...user, loyaltyTier: e.target.value as User['loyaltyTier'] })}\n              className=\"mt-1 block w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-blue-500 focus:border-blue-500\"\n            >\n              <option value=\"bronze\">Bronze</option>\n              <option value=\"silver\">Silver</option>\n              <option value=\"gold\">Gold</option>\n            </select>\n          </div>\n          <div>\n            <label htmlFor=\"state\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">State</label>\n            <select\n              id=\"state\"\n              value={user.state}\n              onChange={(e) => setUser({ ...user, state: e.target.value })}\n              className=\"mt-1 block w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-blue-500 focus:border-blue-500\"\n            >\n              <option value=\"CA\">California (7.5%)</option>\n              <option value=\"NY\">New York (8.875%)</option>\n              <option value=\"TX\">Texas (6.25%)</option>\n              <option value=\"FL\">Florida (6%)</option>\n              <option value=\"IL\">Illinois (6.25%)</option>\n              <option value=\"DEFAULT\">Other (5%)</option>\n            </select>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n### FILE: generated/web/app/layout.tsx\nimport type { Metadata } from 'next';\nimport { Inter } from 'next/font/google';\nimport './globals.css';\nimport { ThemeProvider } from '@/components/providers/ThemeProvider';\nimport { CartProvider } from '@/components/providers/CartProvider';\nimport { Header } from '@/components/Header';\nimport { Footer } from '@/components/Footer';\n\nconst inter = Inter({ subsets: ['latin'] });\n\nexport const metadata: Metadata = {\n  title: 'Next.js E-commerce Shop',\n  description: 'A production-ready Next.js e-commerce application with cart, checkout, and pricing logic.',\n};\n\nexport default function RootLayout({\n  children,\n}: Readonly<{\n  children: React.ReactNode;\n}>) {\n  return (\n    <html lang=\"en\" suppressHydrationWarning>\n      <body className={inter.className}>\n        <ThemeProvider attribute=\"class\" defaultTheme=\"system\" enableSystem>\n          <CartProvider>\n            <div className=\"flex flex-col min-h-screen\">\n              <Header />\n              <main className=\"flex-grow container mx-auto p-4\">\n                {children}\n              </main>\n              <Footer />\n            </div>\n          </CartProvider>\n        </ThemeProvider>\n      </body>\n    </html>\n  );\n}\n\n### FILE: generated/web/app/page.tsx\nimport { ItemCard } from '@/components/ItemCard';\nimport { sampleProducts } from '@/lib/data';\n\nexport default function HomePage() {\n  return (\n    <div className=\"py-8\">\n      <h1 className=\"text-4xl font-extrabold text-center text-gray-900 dark:text-gray-100 mb-10\">\n        Welcome to MyShop!\n      </h1>\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8\">\n        {sampleProducts.map((item) => (\n          <ItemCard key={item.id} item={item} />\n        ))}\n      </div>\n    </div>\n  );\n}\n\n### FILE: generated/web/app/cart/page.tsx\n'use client';\n\nimport { CartItemCard } from '@/components/CartItemCard';\nimport { CartSummary } from '@/components/CartSummary';\nimport { useCart } from '@/components/providers/CartProvider';\n\nexport default function CartPage() {\n  const { cartItems } = useCart();\n\n  return (\n    <div className=\"py-8\">\n      <h1 className=\"text-4xl font-extrabold text-center text-gray-900 dark:text-gray-100 mb-10\">\n        Your Shopping Cart\n      </h1>\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n        <div className=\"lg:col-span-2\">\n          {cartItems.length === 0 ? (\n            <p className=\"text-center text-gray-700 dark:text-gray-300 text-xl\">Your cart is empty.</p>\n          ) : (\n            cartItems.map((item) => <CartItemCard key={item.id} item={item} />)\n          )}\n        </div>\n        <div className=\"lg:col-span-1\">\n          <CartSummary />\n        </div>\n      </div>\n    </div>\n  );\n}\n\n### FILE: generated/web/app/checkout/page.tsx\nimport { CheckoutSummary } from '@/components/CheckoutSummary';\nimport { CartItemCard } from '@/components/CartItemCard';\nimport { useCart } from '@/components/providers/CartProvider';\n\n// This component is a client component because it uses useCart hook\nexport default function CheckoutPage() {\n  const { cartItems } = useCart();\n\n  return (\n    <div className=\"py-8\">\n      <h1 className=\"text-4xl font-extrabold text-center text-gray-900 dark:text-gray-100 mb-10\">\n        Checkout\n      </h1>\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n        <div className=\"lg:col-span-2\">\n          <h2 className=\"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-4\">Items in your cart</h2>\n          {cartItems.length === 0 ? (\n            <p className=\"text-center text-gray-700 dark:text-gray-300 text-xl\">Your cart is empty. Please add items to proceed.</p>\n          ) : (\n            cartItems.map((item) => <CartItemCard key={item.id} item={item} />)\n          )}\n        </div>\n        <div className=\"lg:col-span-1\">\n          <CheckoutSummary />\n        </div>\n      </div>\n    </div>\n  );\n}\n\n### FILE: generated/web/app/order-confirmation/page.tsx\n'use client';\n\nimport Link from 'next/link';\nimport { format } from 'date-fns';\nimport { useEffect, useState } from 'react';\n\nexport default function OrderConfirmationPage() {\n  const [orderDate, setOrderDate] = useState<string | null>(null);\n\n  useEffect(() => {\n    // In a real app, you'd fetch actual order details here.\n    // For this demo, we just show a confirmation message and the current date.\n    setOrderDate(format(new Date(), 'MMMM dd, yyyy HH:mm'));\n  }, []);\n\n  return (\n    <div className=\"py-16 text-center\">\n      <h1 className=\"text-5xl font-extrabold text-green-600 dark:text-green-400 mb-6\">\n        üéâ Order Confirmed!\n      </h1>\n      <p className=\"text-xl text-gray-800 dark:text-gray-200 mb-4\">\n        Thank you for your purchase! Your order has been successfully placed.\n      </p>\n      {orderDate && (\n        <p className=\"text-lg text-gray-600 dark:text-gray-400 mb-8\">\n          Order Date: {orderDate}\n        </p>\n      )}\n      <p className=\"text-lg text-gray-700 dark:text-gray-300 mb-8\">\n        A confirmation email with your order details has been sent to your inbox.\n      </p>\n      <Link href=\"/\" className=\"inline-block bg-blue-600 text-white py-3 px-6 rounded-md text-lg font-semibold hover:bg-blue-700 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50\">\n        Continue Shopping\n      </Link>\n    </div>\n  );\n}"
}